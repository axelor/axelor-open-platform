<?xml version="1.0" ?>
<domain-models xmlns="http://axelor.com/xml/ns/domain-models"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://axelor.com/xml/ns/domain-models https://axelor.com/xml/ns/domain-models/domain-models_8.1.xsd">

  <module name="test" package="com.axelor.test.db" />

  <entity name="AuditCheck" table="AUDIT_CHECK">
    <string name="name" />
    <string name="email" />
    <string name="empSeq" sequence="seq.emp.id" />
    <many-to-one name="user" column="user_id" ref="com.axelor.auth.db.User" />
    <enum name="status" ref="EnumStatus" />
    <boolean name="confirmed" />
    <datetime name="confirmDate" />
    <decimal name="totalAmount" precision="20" scale="4" />

    <track subscribe="true">
      <field name="name" />
      <field name="email" on="ALWAYS" />
      <field name="empSeq" on="CREATE" />
      <field name="user" />

      <field name="name" />
      <field name="confirmDate" on="CREATE" />
      <field name="confirmed" on="UPDATE" />
      <field name="confirmDate" on="UPDATE" if="confirmed" />
      <field name="totalAmount" />

      <message if="true" on="CREATE">Created</message>
      <message if="confirmed" on="UPDATE">Confirmed</message>
      <message if="status == EnumStatus.DRAFT" tag="important">Draft</message>
      <message if="confirmed" tag="success">Confirmed</message>
      <message if="confirmed &amp;&amp; totalAmount &gt;= 1000" tag="important" fields="confirmed">Important</message>
      <message if="email?.contains('example.com')" on="ALWAYS">Invalid email?</message>
    </track>

  </entity>

  <entity name="AuditCheckNoTracking" table="AUDIT_CHECK_NO_TRACKING">
    <string name="name" />
    <string name="email" />
    <string name="empSeq" sequence="seq.emp.id" />
    <many-to-one name="user" column="user_id" ref="com.axelor.auth.db.User" />
    <enum name="status" ref="EnumStatus" />
    <boolean name="confirmed" />
    <datetime name="confirmDate" />
    <decimal name="totalAmount" precision="20" scale="4" />
  </entity>

</domain-models>
