---
title: Remove flush from JPA.persist and and JPA.merge
type: change
description: |
  Removed automatic flush calls from JPA.persist() and JPA.merge() methods to restore JDBC batching for bulk operations.
  Previously, calling flush inside these methods forced Hibernate to execute SQL immediately, disabling JDBC batching
  and causing significant performance degradation. Since entities use SEQUENCE-based ID generation,
  Hibernate does not require an immediate flush to obtain IDs.

  Behavior changes:
  - Constraint violations detected at next flush or transaction commit instead of during .save()
  - JPA lifecycle callbacks (@PrePersist, @PostPersist, @PreUpdate, @PostUpdate, etc.) execute at flush time rather than immediately after save()
  - JPA event listeners and entity interceptors (e.g., AuditInterceptor setting createdBy/updatedBy) trigger at flush time, not during save()
  - SQL execution order may shift slightly due to batching (no functional impact)
  - The changes are now not visible to native SQL or other connections/sessions until the transaction successfully commits

  Code that expects entity state to be populated by listeners/interceptors immediately after save() must call flush()
  explicitly. For example, asserting createdBy field after save() now requires flush() to trigger the audit interceptor.
